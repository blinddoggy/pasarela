<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Formulario de Pago</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css">
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
    }

    header {
      background-color: #333;
      color: white;
      text-align: center;
      padding: 1em;
    }

    main {
      max-width: 600px;
      margin: 0 auto;
      padding: 20px;
      background-color: #f4f4f4;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }

    img {
      width: 100%;
      height: auto;
      border-radius: 8px 8px 0 0;
    }

    form {
      margin-top: 20px;
    }

    label {
      margin-top: 10px;
      font-weight: bold;
      display: block;
    }

    input {
      padding: 8px;
      margin-top: 5px;
      margin-bottom: 15px;
      border: 1px solid #ccc;
      border-radius: 4px;
      width: 100%;
    }

    #tarjeta-element {
      margin-top: 15px;
      padding: 15px;
      border: 1px solid #ccc;
      border-radius: 4px;
    }

    button {
      background-color: #009688;
      color: white;
      padding: 10px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 16px;
      transition: background-color 0.3s;
      width: 100%;
    }

    button:hover {
      background-color: #00796b;
    }

    .iconos {
      display: flex;
      justify-content: space-between;
      margin-top: 10px;
    }

    .icono {
      display: flex;
      align-items: center;
      color: #4caf50;
    }

    .icono svg {
      margin-right: 5px;
    }
  </style>
</head>
<body>

  <header>
    <h1>Formulario de Pago</h1>
  </header>

  <main>
    <img src="ruta/a/tu/imagen.jpg" alt="Imagen de Encabezado">

    <form action="/procesar_pago" method="post" id="formularioPago">
      <!-- Detalles del Producto -->
      <label for="producto">Producto:</label>
      <input type="text" id="producto" name="producto" required>

      <label for="precio">Precio:</label>
      <input type="number" id="precio" name="precio" required>

      <!-- Detalles del Cliente -->
      <label for="nombre">Nombre del Cliente:</label>
      <input type="text" id="nombre" name="nombre" required>

      <label for="correo">Correo Electrónico:</label>
      <input type="email" id="correo" name="correo" required>

      <!-- Detalles de la Tarjeta de Crédito -->
      <label for="tarjeta">Número de Tarjeta:</label>
      <div id="tarjeta-element"></div>

      <div class="iconos">
        <div class="icono">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-credit-card">
            <rect x="1" y="4" width="22" height="16" rx="2" ry="2"></rect>
            <line x1="1" y1="10" x2="23" y2="10"></line>
          </svg>
          Seguro
        </div>
        <div class="icono">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-lock">
            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
            <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
          </svg>
          Seguro
        </div>
        <div class="icono">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-shield">
            <path d="M12 22s5.5-1 8.8-5.4L21 14s1.5-2.8 3-5-1-4-1-4l-1-1-1.8 1-1-1s-.3-.5-1-1c-1-1-2-1-2-1s-1-1-2-1-2 1-2 1-1 0-1 1-1 1-1 1-2 0-2 1-2 1-1 1-1-1 0-1 1-2 1-2 2-2 3-2 4-2 4-2l1.8-.9S12 3 12 3s-2.3-.2-4.2 1.6L6 6s-1 1-1 2l1 1s1.1 2.3 3 5.3l-1.7 4.1S2 21 2 21l1.8 1.6C6.5 23.3 12 22 12 22z"></path>
          </svg>
          Seguro
        </div>
      </div>

      <!-- Botón de Pago -->
      <button type="submit">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-check-circle mr-2">
          <circle cx="12" cy="12" r="10"></circle>
          <polyline points="16 8 10 14 8 13"></polyline>
          <polyline points="17 8 23 8 23 14"></polyline>
        </svg>
        Pagar
      </button>
    </form>
  </main>

  <!-- Agrega la librería de Stripe -->
  <script src="https://js.stripe.com/v3/"></script>

  <!-- Script para configurar el formulario de pago -->
  <script>
    const stripe = Stripe('pk_test_51OGbKIBPtkUWotiXbOzmz2hT30jxeussT3i9Epp2pjMlgmsFwsehxOFdOX2tFbhyEaZqwbBfwUPHpDNVlKm34CYV00vJ2az7vQ'); // Reemplaza con tu clave pública de Stripe
    const elements = stripe.elements();
    const tarjetaElement = elements.create('card');

    tarjetaElement.mount('#tarjeta-element');

    const formularioPago = document.getElementById('formularioPago');

    formularioPago.addEventListener('submit', async (event) => {
      event.preventDefault();

      const { token, error } = await stripe.createToken(tarjetaElement);

      if (error) {
        console.error(error);
      } else {
        // Envía el token y otros detalles al servidor para procesar el pago
        const producto = document.getElementById('producto').value;
        const precio = document.getElementById('precio').value;
        const nombre = document.getElementById('nombre').value;
        const correo = document.getElementById('correo').value;

        fetch('/procesar_pago', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            producto,
            precio,
            nombre,
            correo,
            token: token.id,
          }),
        })
        .then(response => response.json())
        .then(data => console.log(data))
        .catch(error => console.error(error));
      }
    });
  </script>

</body>
</html>
